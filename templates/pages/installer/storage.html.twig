{% extends 'layouts/installer.html.twig' %}
{% import 'partials/components/_macros.html.twig' as ui %}

{% block content %}
    {% include 'partials/components/section_heading.html.twig' with {
        title: 'installer.storage.heading.title'|trans,
        subtitle: 'installer.storage.heading.subtitle'|trans
    } only %}

    <div class="grid gap-6 lg:grid-cols-[minmax(0,2fr)_minmax(0,1fr)]">
        <div class="surface rounded-md border border-border p-6 layout-stack layout-stack--loose">
            {{ form_start(storage_form, { attr: { class: 'layout-stack layout-stack--tight' } }) }}
                <p class="text-sm text-text-muted">
                    {{ 'installer.storage.instructions'|trans|raw }}
                </p>
                {{ ui.form_row_with_tooltip(storage_form.root, help_tooltips['storage.root'] ?? null) }}
                <div class="flex justify-end">
                    {{ include('partials/components/button.html.twig', {
                        label: 'installer.storage.actions.save'|trans,
                        attributes: { type: 'submit', class: 'btn btn-primary' }
                    }) }}
                </div>
            {{ form_end(storage_form) }}
        </div>

        <div class="layout-stack layout-stack--tight items-center">
            {% include 'partials/components/illustration.html.twig' with {
                name: 'add-files',
                variant: 'lg',
                attributes: { class: 'w-full max-w-md' },
                alt: 'installer.storage.illustration_alt'|trans
            } only %}

            {% set preparation_body %}
                <ol class="list-decimal space-y-3 pl-5 text-sm leading-relaxed text-text-muted">
                    <li>{{ 'installer.storage.prep.item1'|trans|raw }}</li>
                    <li>{{ 'installer.storage.prep.item2'|trans }}</li>
                    <li>{{ 'installer.storage.prep.item3'|trans }}</li>
                    <li>{{ 'installer.storage.prep.item4'|trans }}</li>
                </ol>
            {% endset %}

            {% include 'partials/components/card.html.twig' with {
                eyebrow: 'installer.storage.prep.eyebrow'|trans,
                title: 'installer.storage.prep.title'|trans,
                body: preparation_body
            } only %}

            {% include 'partials/components/card.html.twig' with {
                variant: 'muted',
                title: 'ui.roadmap'|trans,
                body: '<p class="text-sm text-text-muted">' ~ 'installer.storage.roadmap.body'|trans ~ '</p>'
            } only %}

            {% include 'partials/components/help_entries.html.twig' with {
                entries: help['setup.storage']|default([])
            } only %}
        </div>
    </div>
{% endblock %}
