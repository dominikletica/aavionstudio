{% extends 'layouts/project.html.twig' %}

{% set project_title = 'Component Showcase' %}
{% set page_title = 'UI Component Showcase' %}

{% block content %}
    {% include 'partials/components/section_heading.html.twig' with {
        title: 'UI Component Showcase',
        subtitle: 'A quick overview of the base theme components and Tailwind utilities available for installer/admin screens.'
    } only %}

    <section class="grid gap-6 lg:grid-cols-[minmax(0,2fr)_minmax(0,1fr)]">
        <div class="layout-stack layout-stack--loose">
            {% include 'partials/components/card.html.twig' with {
                eyebrow: 'Buttons',
                title: 'Button variants',
                body: '
                    <div class="flex flex-wrap items-center gap-3">
                        ' ~ include("partials/components/button.html.twig", { label: "Primary", icon: "bolt" }, with_context = false) ~ '
                        ' ~ include("partials/components/button.html.twig", { label: "Secondary", variant: "secondary" }, with_context = false) ~ '
                        ' ~ include("partials/components/button.html.twig", { label: "Ghost", variant: "ghost" }, with_context = false) ~ '
                        ' ~ include("partials/components/button.html.twig", { label: "Full width", block: true }, with_context = false) ~ '
                    </div>
                '
            } only %}

            {% include 'partials/components/alert.html.twig' with {
                variant: 'success',
                title: 'All systems operational',
                description: 'You can reuse the alert component for inline feedback, toast-style callouts, or hero notes.'
            } only %}

            {% set table_body %}
                {% include 'partials/components/table.html.twig' with {
                    columns: [
                        { label: 'Feature', key: 'feature' },
                        { label: 'Status', key: 'status' },
                        { label: 'Notes', key: 'notes' }
                    ],
                    rows: [
                        { feature: 'Navigation', status: 'Complete', notes: 'Sidebar + hero menus ready.' },
                        { feature: 'Installer Wizard', status: 'In progress', notes: 'Cards, tables, illustrations available.' },
                        { feature: 'Admin UI', status: 'Next up', notes: 'Navigation + module scaffolding queued.' }
                    ],
                    compact: true
                } only %}
            {% endset %}

            {% include 'partials/components/card.html.twig' with {
                eyebrow: 'Tables',
                title: 'Feature status',
                body: table_body
            } only %}

            {% set form_body %}
                <form class="layout-stack">
                    {% include 'partials/forms/fields/input.html.twig' with {
                        id: 'demo-name',
                        name: 'name',
                        label: 'Name',
                        placeholder: 'Jane Doe',
                        help: 'Text input and help text styling.'
                    } only %}
                    {% include 'partials/forms/fields/select.html.twig' with {
                        id: 'demo-role',
                        name: 'role',
                        label: 'Role',
                        placeholder: 'Choose a role',
                        options: [
                            { value: 'admin', label: 'Administrator' },
                            { value: 'editor', label: 'Editor' },
                            { value: 'viewer', label: 'Viewer' }
                        ]
                    } only %}
                    {% include 'partials/forms/fields/textarea.html.twig' with {
                        id: 'demo-notes',
                        name: 'notes',
                        label: 'Notes',
                        placeholder: 'Optional notes ...'
                    } only %}
                    {% include 'partials/forms/fields/checkbox.html.twig' with {
                        id: 'demo-checkbox',
                        name: 'accept_terms',
                        label: 'I agree to the guidelines',
                        description: 'Checkbox component with description copy.'
                    } only %}
                    {% include 'partials/forms/fields/switch.html.twig' with {
                        id: 'demo-switch',
                        name: 'notifications',
                        label: 'Enable notifications',
                        description: 'Switches reuse the same color tokens as buttons.'
                    } only %}
                    <div class="flex items-center gap-3">
                        {% include 'partials/components/button.html.twig' with { label: 'Submit form', icon: 'thumb-up' } only %}
                        {% include 'partials/components/button.html.twig' with { label: 'Cancel', variant: 'ghost' } only %}
                    </div>
                </form>
            {% endset %}

            {% include 'partials/components/card.html.twig' with {
                eyebrow: 'Forms',
                title: 'Form field collection',
                body: form_body
            } only %}

            {% set stimulus_body %}
                <div class="layout-stack layout-stack--tight">
                    <div data-controller="themedemo" data-themedemo-count-value="2" class="rounded-xl border border-dashed border-border/60 bg-surface p-4">
                        <div class="flex items-center justify-between gap-3">
                            <p class="text-sm font-medium text-text">{{ 'Active modules'|trans }}</p>
                            <span class="badge badge--info">{{ 'Stimulus'|trans }}</span>
                        </div>
                        <p class="text-3xl font-semibold tracking-tight text-primary"><span data-themedemo-target="output">2</span></p>
                        <div class="flex flex-wrap gap-3 pt-3">
                            {{ include('partials/components/button.html.twig', {
                                label: 'Add module'|trans,
                                icon: 'plus',
                                attributes: { 'data-action': 'click->themedemo#increment' }
                            }, with_context = false) }}
                            {{ include('partials/components/button.html.twig', {
                                label: 'Reset'|trans,
                                variant: 'ghost',
                                icon: 'refresh',
                                attributes: { 'data-action': 'click->themedemo#reset' }
                            }, with_context = false) }}
                        </div>
                    </div>
                    <p class="text-xs text-text-muted">{{ 'Stimulus keeps the counter in sync without reloading the page. Attach the controller to any dashboard metric for live previews.'|trans }}</p>
                </div>
            {% endset %}

            {% include 'partials/components/card.html.twig' with {
                eyebrow: 'Interactions',
                title: 'Stimulus counter demo',
                body: stimulus_body
            } only %}

            {% set codemirror_body %}
                <div class="layout-stack layout-stack--tight">
                    <p class="text-sm text-text-muted">{{ 'The Codemirror Stimulus controller transforms any textarea into an editor with language-aware highlighting.'|trans }}</p>
                    <textarea
                        id="themedemo-editor"
                        name="themedemo_editor"
                        rows="8"
                        data-controller="codemirror"
                        data-codemirror-language-value="twig"
                        data-codemirror-placeholder-value="{{ 'Paste Twig here…'|trans }}"
                    >{% verbatim %}{% extends 'layouts/project.html.twig' %}
{% block content %}
    <h1>{{ page.title }}</h1>
{% endblock %}{% endverbatim %}</textarea>
                </div>
            {% endset %}

            {% include 'partials/components/card.html.twig' with {
                eyebrow: 'Code editor',
                title: 'CodeMirror integration',
                body: codemirror_body
            } only %}
        </div>

        <aside class="layout-stack layout-stack--loose">
            {% set turbo_body %}
                <turbo-frame id="themedemo_tip" src="{{ path('_theme_demo_tip') }}" loading="lazy" class="layout-stack layout-stack--tight rounded-xl border border-dashed border-border/60 bg-surface p-4">
                    <p class="text-sm text-text-muted">{{ 'Loading tip…'|trans }}</p>
                </turbo-frame>
                <div class="flex flex-wrap gap-2">
                    {{ include('partials/components/button.html.twig', {
                        label: 'Refresh tip'|trans,
                        icon: 'arrows-rotate',
                        tag: 'a',
                        url: path('_theme_demo_tip', { refresh: random(10000) }),
                        attributes: { 'data-turbo-frame': 'themedemo_tip' }
                    }, with_context = false) }}
                    {{ include('partials/components/button.html.twig', {
                        label: 'Show docs reminder'|trans,
                        variant: 'ghost',
                        tag: 'a',
                        url: path('_theme_demo_tip', { i: 3 }),
                        attributes: { 'data-turbo-frame': 'themedemo_tip' }
                    }, with_context = false) }}
                </div>
                <p class="text-xs text-text-muted">{{ 'Turbo frames lazy-load snippets and refresh inline without manual JavaScript.'|trans }}</p>
            {% endset %}

            {% include 'partials/components/card.html.twig' with {
                title: 'Turbo frame tips',
                subtitle: 'Inline refreshable help blocks.',
                body: turbo_body
            } only %}

            {% include 'partials/components/card.html.twig' with {
                variant: 'emphasis',
                title: 'Illustrations',
                body: include('partials/components/illustration.html.twig', { name: 'a-whole-year', variant: 'lg', attributes: { class: 'w-full' }, alt: 'Illustration sample' }, with_context = false)
            } only %}

            {% include 'partials/components/card.html.twig' with {
                title: 'Empty state',
                body: include('partials/components/empty_state.html.twig', {
                    title: 'Nothing queued',
                    description: 'Use empty states to onboard users when a section has not yet been configured.',
                    variant: 'muted'
                }, with_context = false)
            } only %}

            {% set alpine_body %}
                <div x-data="{ tab: 'preview' }" x-cloak class="layout-stack layout-stack--tight rounded-xl border border-border/60 bg-surface p-4">
                    <div class="flex flex-wrap gap-2">
                        <button type="button" class="btn btn-secondary" :class="{ 'btn--ghost': tab !== 'preview' }" @click="tab = 'preview'">{{ 'Preview'|trans }}</button>
                        <button type="button" class="btn btn-secondary" :class="{ 'btn--ghost': tab !== 'code' }" @click="tab = 'code'">{{ 'Code'|trans }}</button>
                    </div>
                    <div class="rounded-lg bg-muted/40 p-4 text-sm leading-relaxed text-text-muted" x-show="tab === 'preview'" x-transition>
                        {{ 'Alpine.js is available globally for lightweight UI helpers—ideal for toggles, tabs, or progressive disclosure without adding bespoke controllers.'|trans }}
                    </div>
                    <pre class="overflow-x-auto rounded-lg bg-muted/70 p-4 text-xs leading-relaxed text-text-muted" x-show="tab === 'code'" x-transition>
<code>&lt;div x-data="{ open: true }"&gt;
    &lt;button @click="open = !open"&gt;Toggle&lt;/button&gt;
    &lt;div x-show="open"&gt;Content&lt;/div&gt;
&lt;/div&gt;</code>
                    </pre>
                </div>
            {% endset %}

            {% include 'partials/components/card.html.twig' with {
                title: 'Alpine snippet',
                subtitle: 'Micro-interactions without custom JS.',
                body: alpine_body
            } only %}

            {% include 'partials/components/card.html.twig' with {
                title: 'Overlay components',
                subtitle: 'Modals and drawers share the same token set.',
                body: '<p class="text-sm text-text-muted">Trigger overlays by including <code>partials/components/modal.html.twig</code> or <code>partials/components/drawer.html.twig</code> from your controller templates. Toggle visibility by switching <code>data-state</code> between <code>hidden</code> and <code>visible</code>.</p>'
            } only %}
        </aside>
    </section>

    <section class="layout-stack layout-stack--loose">
        {% include 'partials/components/section_heading.html.twig' with {
            title: 'Tailwind typography sample',
            subtitle: 'Base headings and paragraph styles inherit Tailwind tokens.'
        } only %}
        <article class="prose prose-slate max-w-none">
            <h2>Heading level 2</h2>
            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Expedita, at laboriosam. Integer ornare viverra urna, vitae accumsan odio mollis vel.</p>
            <ul>
                <li>Bullet list item one</li>
                <li>Bullet list item two</li>
                <li>Bullet list item three</li>
            </ul>
            <blockquote>
                Theme authors can override these tokens by shipping a custom Tailwind config with higher precedence.
            </blockquote>
            <p><a href="#">Link styles</a> pick up the primary color and hover states from the theme tokens.</p>
        </article>
    </section>
{% endblock %}
