{% extends 'layouts/project.html.twig' %}

{% set project_title = 'demo.page.project_title'|trans %}
{% set page_title = 'demo.page.page_title'|trans %}

{% block content %}
    {% include 'partials/components/section_heading.html.twig' with {
        title: 'demo.page.heading.title'|trans,
        subtitle: 'demo.page.heading.subtitle'|trans
    } only %}

    <section class="grid gap-6 lg:grid-cols-[minmax(0,2fr)_minmax(0,1fr)]">
        <div class="layout-stack layout-stack--loose">
            {% include 'partials/components/card.html.twig' with {
                eyebrow: 'demo.buttons.card.eyebrow'|trans,
                title: 'demo.buttons.card.title'|trans,
                body: '
                    <div class="flex flex-wrap items-center gap-3">
                        ' ~ include("partials/components/button.html.twig", { label: 'demo.buttons.primary'|trans, icon: "bolt" }, with_context = false) ~ '
                        ' ~ include("partials/components/button.html.twig", { label: 'demo.buttons.secondary'|trans, variant: "secondary" }, with_context = false) ~ '
                        ' ~ include("partials/components/button.html.twig", { label: 'demo.buttons.ghost'|trans, variant: "ghost" }, with_context = false) ~ '
                        ' ~ include("partials/components/button.html.twig", { label: 'demo.buttons.full'|trans, block: true }, with_context = false) ~ '
                    </div>
                '
            } only %}

            {% include 'partials/components/alert.html.twig' with {
                variant: 'success',
                title: 'demo.alerts.success.title'|trans,
                description: 'demo.alerts.success.description'|trans
            } only %}

            {% set table_body %}
                {% include 'partials/components/table.html.twig' with {
                    columns: [
                        { label: 'demo.table.columns.feature'|trans, key: 'feature' },
                        { label: 'demo.table.columns.status'|trans, key: 'status' },
                        { label: 'demo.table.columns.notes'|trans, key: 'notes' }
                    ],
                    rows: [
                        { feature: 'demo.table.rows.navigation.feature'|trans, status: 'demo.table.rows.navigation.status'|trans, notes: 'demo.table.rows.navigation.notes'|trans },
                        { feature: 'demo.table.rows.installer.feature'|trans, status: 'demo.table.rows.installer.status'|trans, notes: 'demo.table.rows.installer.notes'|trans },
                        { feature: 'demo.table.rows.admin.feature'|trans, status: 'demo.table.rows.admin.status'|trans, notes: 'demo.table.rows.admin.notes'|trans }
                    ],
                    compact: true
                } only %}
            {% endset %}

            {% include 'partials/components/card.html.twig' with {
                eyebrow: 'demo.table.card.eyebrow'|trans,
                title: 'demo.table.card.title'|trans,
                body: table_body
            } only %}

            {% set form_body %}
                <form class="layout-stack">
                    {% include 'partials/forms/fields/input.html.twig' with {
                        id: 'demo-name',
                        name: 'name',
                        label: 'demo.forms.input.label'|trans,
                        placeholder: 'demo.forms.input.placeholder'|trans,
                        help: 'demo.forms.input.help'|trans
                    } only %}
                    {% include 'partials/forms/fields/select.html.twig' with {
                        id: 'demo-role',
                        name: 'role',
                        label: 'demo.forms.select.label'|trans,
                        placeholder: 'demo.forms.select.placeholder'|trans,
                        options: [
                            { value: 'admin', label: 'demo.forms.select.option.admin'|trans },
                            { value: 'editor', label: 'demo.forms.select.option.editor'|trans },
                            { value: 'viewer', label: 'demo.forms.select.option.viewer'|trans }
                        ]
                    } only %}
                    {% include 'partials/forms/fields/textarea.html.twig' with {
                        id: 'demo-notes',
                        name: 'notes',
                        label: 'demo.forms.textarea.label'|trans,
                        placeholder: 'demo.forms.textarea.placeholder'|trans
                    } only %}
                    {% include 'partials/forms/fields/checkbox.html.twig' with {
                        id: 'demo-checkbox',
                        name: 'accept_terms',
                        label: 'demo.forms.checkbox.label'|trans,
                        description: 'demo.forms.checkbox.description'|trans
                    } only %}
                    {% include 'partials/forms/fields/switch.html.twig' with {
                        id: 'demo-switch',
                        name: 'notifications',
                        label: 'demo.forms.switch.label'|trans,
                        description: 'demo.forms.switch.description'|trans
                    } only %}
                    <div class="flex items-center gap-3">
                        {% include 'partials/components/button.html.twig' with { label: 'demo.forms.actions.submit'|trans, icon: 'thumb-up' } only %}
                        {% include 'partials/components/button.html.twig' with { label: 'demo.forms.actions.cancel'|trans, variant: 'ghost' } only %}
                    </div>
                </form>
            {% endset %}

            {% include 'partials/components/card.html.twig' with {
                eyebrow: 'demo.forms.eyebrow'|trans,
                title: 'demo.forms.title'|trans,
                body: form_body
            } only %}

            {% set stimulus_body %}
                <div class="layout-stack layout-stack--tight">
                    <div data-controller="themedemo" data-themedemo-count-value="2" class="rounded-xl border border-dashed border-border/60 bg-surface p-4">
                        <div class="flex items-center justify-between gap-3">
                            <p class="text-sm font-medium text-text">{{ 'demo.modules.active_title'|trans }}</p>
                            <span class="badge badge--info">{{ 'demo.modules.badge'|trans }}</span>
                        </div>
                        <p class="text-3xl font-semibold tracking-tight text-primary"><span data-themedemo-target="output">2</span></p>
                        <div class="flex flex-wrap gap-3 pt-3">
                            {{ include('partials/components/button.html.twig', {
                                label: 'demo.modules.actions.add'|trans,
                                icon: 'plus',
                                attributes: { 'data-action': 'click->themedemo#increment' }
                            }, with_context = false) }}
                            {{ include('partials/components/button.html.twig', {
                                label: 'demo.modules.actions.reset'|trans,
                                variant: 'ghost',
                                icon: 'refresh',
                                attributes: { 'data-action': 'click->themedemo#reset' }
                            }, with_context = false) }}
                        </div>
                    </div>
                    <p class="text-xs text-text-muted">{{ 'demo.modules.description'|trans }}</p>
                </div>
            {% endset %}

            {% include 'partials/components/card.html.twig' with {
                eyebrow: 'demo.modules.eyebrow'|trans,
                title: 'demo.modules.title'|trans,
                body: stimulus_body
            } only %}

            {% set codemirror_body %}
                <div class="layout-stack layout-stack--tight">
                    <p class="text-sm text-text-muted">{{ 'demo.codemirror.description'|trans }}</p>
                    <textarea
                        id="themedemo-editor"
                        name="themedemo_editor"
                        rows="8"
                        data-controller="codemirror"
                        data-codemirror-language-value="twig"
                        data-codemirror-placeholder-value="{{ 'demo.codemirror.placeholder'|trans }}"
                    >{% verbatim %}{% extends 'layouts/project.html.twig' %}
{% block content %}
    <h1>{{ page.title }}</h1>
{% endblock %}{% endverbatim %}</textarea>
                </div>
            {% endset %}

            {% include 'partials/components/card.html.twig' with {
                eyebrow: 'demo.codemirror.eyebrow'|trans,
                title: 'demo.codemirror.title'|trans,
                body: codemirror_body
            } only %}
        </div>

        <aside class="layout-stack layout-stack--loose">
            {% set turbo_body %}
                <turbo-frame id="themedemo_tip" src="{{ path('_theme_demo_tip') }}" loading="lazy" class="layout-stack layout-stack--tight rounded-xl border border-dashed border-border/60 bg-surface p-4">
                    <p class="text-sm text-text-muted">{{ 'demo.turbo.loading'|trans }}</p>
                </turbo-frame>
                <div class="flex flex-wrap gap-2">
                    {{ include('partials/components/button.html.twig', {
                        label: 'demo.turbo.refresh'|trans,
                        icon: 'arrows-rotate',
                        tag: 'a',
                        url: path('_theme_demo_tip', { refresh: random(10000) }),
                        attributes: { 'data-turbo-frame': 'themedemo_tip' }
                    }, with_context = false) }}
                    {{ include('partials/components/button.html.twig', {
                        label: 'demo.turbo.reminder'|trans,
                        variant: 'ghost',
                        tag: 'a',
                        url: path('_theme_demo_tip', { i: 3 }),
                        attributes: { 'data-turbo-frame': 'themedemo_tip' }
                    }, with_context = false) }}
                </div>
                <p class="text-xs text-text-muted">{{ 'demo.turbo.description'|trans }}</p>
            {% endset %}

            {% include 'partials/components/card.html.twig' with {
                title: 'demo.turbo.title'|trans,
                subtitle: 'demo.turbo.subtitle'|trans,
                body: turbo_body
            } only %}

            {% include 'partials/components/card.html.twig' with {
                variant: 'emphasis',
                title: 'demo.illustrations.title'|trans,
                body: include('partials/components/illustration.html.twig', { name: 'a-whole-year', variant: 'lg', attributes: { class: 'w-full' }, alt: 'demo.illustrations.alt'|trans }, with_context = false)
            } only %}

            {% include 'partials/components/card.html.twig' with {
                title: 'demo.empty.card_title'|trans,
                body: include('partials/components/empty_state.html.twig', {
                    title: 'demo.empty.headline'|trans,
                    description: 'demo.empty.description'|trans,
                    variant: 'muted'
                }, with_context = false)
            } only %}

            {% set alpine_body %}
                <div x-data="{ tab: 'preview' }" x-cloak class="layout-stack layout-stack--tight rounded-xl border border-border/60 bg-surface p-4">
                    <div class="flex flex-wrap gap-2">
                        <button type="button" class="btn btn-secondary" :class="{ 'btn--ghost': tab !== 'preview' }" @click="tab = 'preview'">{{ 'ui.preview'|trans }}</button>
                        <button type="button" class="btn btn-secondary" :class="{ 'btn--ghost': tab !== 'code' }" @click="tab = 'code'">{{ 'ui.code'|trans }}</button>
                    </div>
                    <div class="rounded-lg bg-muted/40 p-4 text-sm leading-relaxed text-text-muted" x-show="tab === 'preview'" x-transition>
                        {{ 'demo.alpine.description'|trans }}
                    </div>
                    <pre class="overflow-x-auto rounded-lg bg-muted/70 p-4 text-xs leading-relaxed text-text-muted" x-show="tab === 'code'" x-transition>
<code>&lt;div x-data="{ open: true }"&gt;
    &lt;button @click="open = !open"&gt;Toggle&lt;/button&gt;
    &lt;div x-show="open"&gt;Content&lt;/div&gt;
&lt;/div&gt;</code>
                    </pre>
                </div>
            {% endset %}

            {% include 'partials/components/card.html.twig' with {
                title: 'Alpine snippet',
                subtitle: 'Micro-interactions without custom JS.',
                body: alpine_body
            } only %}

            {% include 'partials/components/card.html.twig' with {
                title: 'Overlay components',
                subtitle: 'Modals and drawers share the same token set.',
                body: '<p class="text-sm text-text-muted">Trigger overlays by including <code>partials/components/modal.html.twig</code> or <code>partials/components/drawer.html.twig</code> from your controller templates. Toggle visibility by switching <code>data-state</code> between <code>hidden</code> and <code>visible</code>.</p>'
            } only %}
        </aside>
    </section>

    <section class="layout-stack layout-stack--loose">
        {% include 'partials/components/section_heading.html.twig' with {
            title: 'Tailwind typography sample',
            subtitle: 'Base headings and paragraph styles inherit Tailwind tokens.'
        } only %}
        <article class="prose prose-slate max-w-none">
            <h2>Heading level 2</h2>
            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Expedita, at laboriosam. Integer ornare viverra urna, vitae accumsan odio mollis vel.</p>
            <ul>
                <li>Bullet list item one</li>
                <li>Bullet list item two</li>
                <li>Bullet list item three</li>
            </ul>
            <blockquote>
                Theme authors can override these tokens by shipping a custom Tailwind config with higher precedence.
            </blockquote>
            <p><a href="#">Link styles</a> pick up the primary color and hover states from the theme tokens.</p>
        </article>
    </section>
{% endblock %}
