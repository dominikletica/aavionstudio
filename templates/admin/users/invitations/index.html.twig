<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>User Invitations · Admin · aavion Studio</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif; margin: 0; padding: 2rem; background: #f5f7fb; color: #111827; }
        h1 { margin-top: 0; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.5rem; }
        .card { background: #fff; padding: 1.75rem; border-radius: 12px; box-shadow: 0 18px 36px rgba(15,23,42,.08); }
        label { display: block; margin-bottom: .5rem; font-weight: 600; }
        input[type="email"] { width: 100%; padding: .75rem 1rem; border: 1px solid #cbd5f5; border-radius: 10px; font-size: 1rem; }
        input:focus { outline: none; border-color: #2563eb; box-shadow: 0 0 0 4px rgba(37,99,235,.18); }
        button { margin-top: 1rem; padding: .75rem 1.25rem; border: none; border-radius: 10px; background: linear-gradient(135deg, #2563eb, #1d4ed8); color: #fff; font-weight: 600; cursor: pointer; }
        table { width: 100%; border-collapse: collapse; margin-top: 1rem; }
        th, td { text-align: left; padding: .75rem; border-bottom: 1px solid #e5e7eb; }
        .tag { display: inline-block; padding: .25rem .6rem; border-radius: 999px; font-size: .75rem; background: #e0f2fe; color: #05558a; }
        .flash-success { margin-bottom: 1rem; padding: .75rem 1rem; border-radius: 10px; background: rgba(34,197,94,.1); color: #15803d; }
        .flash-error { margin-bottom: 1rem; padding: .75rem 1rem; border-radius: 10px; background: rgba(239,68,68,.1); color: #b91c1c; }
        form.inline { display: inline; }
        a.button-link { display: inline-block; margin-top: 1rem; color: #2563eb; text-decoration: none; }
    </style>
</head>
<body>
    {% for label, messages in app.flashes %}
        {% for message in messages %}
            <div class="flash-{{ label }}">{{ message }}</div>
        {% endfor %}
    {% endfor %}

    <h1>User Invitations</h1>
    <div class="grid">
        <div class="card">
            <h2>Create invitation</h2>
            {{ form_start(createForm) }}
                {{ form_row(createForm.email) }}
                <button type="submit">Send invitation</button>
            {{ form_end(createForm) }}
        </div>
        <div class="card">
            <h2>Pending invitations</h2>
            {% if invitations is empty %}
                <p>No invitations have been sent yet.</p>
            {% else %}
                <table>
                    <thead>
                        <tr>
                            <th>Email</th>
                            <th>Status</th>
                            <th>Created</th>
                            <th>Expires</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for invitation in invitations %}
                            <tr>
                                <td>{{ invitation.email }}</td>
                                <td><span class="tag">{{ invitation.status }}</span></td>
                                <td>{{ invitation.createdAt|date('Y-m-d H:i') }}</td>
                                <td>{{ invitation.expiresAt|date('Y-m-d H:i') }}</td>
                                <td>
                                    {% if invitation.status == 'pending' %}
                                        <form class="inline" method="post" action="{{ path('admin_user_invitations_cancel', { id: invitation.id }) }}">
                                            <input type="hidden" name="_token" value="{{ csrf_token('cancel_invite_' ~ invitation.id) }}">
                                            <button type="submit" style="background:#fee2e2;color:#b91c1c;">Cancel</button>
                                        </form>
                                    {% endif %}
                                </td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            {% endif %}
        </div>
    </div>
</body>
</html>
